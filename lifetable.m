%---How Old Are You In Human Years---------%
%--------- Made by Tyler Barron -----------%
%-----------trbarron@uw.edu----------------%
%-----------tylerbarron.com----------------%

%-----Huge Data Dump for next 900ish lines-%
%----See link right below------------------%
% http://www.cdc.gov/nchs/data/nvsr/nvsr54/nvsr54_14.pdf %

Total = [0.006865
0.000469
0.000337
0.000254
0.000194
0.000177
0.000160
0.000147
0.000132
0.000117
0.000109
0.000118
0.000157
0.000233
0.000339
0.000460
0.000577
0.000684
0.000769
0.000832
0.000894
0.000954
0.000990
0.000997
0.000982
0.000960
0.000942
0.000936
0.000947
0.000974
0.001008
0.001046
0.001097
0.001162
0.001244
0.001336
0.001441
0.001567
0.001714
0.001874
0.002038
0.002207
0.002389
0.002593
0.002819
0.003064
0.003322
0.003589
0.003863
0.004148
0.004458
0.004800
0.005165
0.005554
0.005971
0.006423
0.006925
0.007496
0.008160
0.008927
0.009827
0.010831
0.011872
0.012891
0.013908
0.015003
0.016267
0.017699
0.019320
0.021108
0.022950
0.024904
0.027151
0.029784
0.032753
0.035831
0.038987
0.042503
0.046557
0.051200
0.056335
0.061837
0.067856
0.074504
0.081975
0.089682
0.098031
0.107059
0.116804
0.127300
0.138581
0.150676
0.163611
0.177408
0.192080
0.207636
0.224075
0.241387
0.259552
0.278539
1.00000];

Males = [0.007611 
0.000522 
0.000371 
0.000288 
0.000215 
0.000196 
0.000179 
0.000165 
0.000147 
0.000126 
0.000113 
0.000125 
0.000180 
0.000291 
0.000445 
0.000618 
0.000787 
0.000946 
0.001079 
0.001186 
0.001293 
0.001392 
0.001449 
0.001456 
0.001424 
0.001376 
0.001334 
0.001308 
0.001311 
0.001339 
0.001377 
0.001417 
0.001471 
0.001541 
0.001628 
0.001729 
0.001848 
0.001995 
0.002171 
0.002365 
0.002566 
0.002775 
0.003006 
0.003270 
0.003566 
0.003889 
0.004225 
0.004575 
0.004932 
0.005303 
0.005708 
0.006148 
0.006606 
0.007074 
0.007561 
0.008082 
0.008662 
0.009332 
0.010128 
0.011061 
0.012157 
0.013379 
0.014658 
0.015922 
0.017186 
0.018538 
0.020089 
0.021847 
0.023845 
0.026053 
0.028315 
0.030693 
0.033440 
0.036693 
0.040399 
0.044294 
0.048274 
0.052603 
0.057451 
0.062909 
0.069071 
0.075759 
0.082842 
0.090223 
0.098137 
0.106994 
0.116538 
0.126802 
0.137815 
0.149607 
0.162199 
0.175613 
0.189860 
0.204947 
0.220874 
0.237632 
0.255201 
0.273553 
0.292650 
0.312443 
1.00000];

Females = [0.006083 
0.000414 
0.000301 
0.000218 
0.000172 
0.000158 
0.000141 
0.000128 
0.000117 
0.000108 
0.000105 
0.000110 
0.000132 
0.000173 
0.000228 
0.000293 
0.000356 
0.000408 
0.000440 
0.000457 
0.000472 
0.000489 
0.000502 
0.000510 
0.000516 
0.000522 
0.000533 
0.000548 
0.000570 
0.000597 
0.000629 
0.000667 
0.000716 
0.000778 
0.000854 
0.000938 
0.001031 
0.001137 
0.001256 
0.001383 
0.001512 
0.001644 
0.001780 
0.001926 
0.002084 
0.002257 
0.002439 
0.002629 
0.002824 
0.003030 
0.003254 
0.003504 
0.003786 
0.004102 
0.004456 
0.004847 
0.005278 
0.005762 
0.006311 
0.006935 
0.007669 
0.008492 
0.009338 
0.010156 
0.010972 
0.011861 
0.012902 
0.014086 
0.015429 
0.016916 
0.018468 
0.020140 
0.022067 
0.024315 
0.026843 
0.029448 
0.032155 
0.035257 
0.038947 
0.043250 
0.047952 
0.052970 
0.058629 
0.065153 
0.072705 
0.080141 
0.088261 
0.097113 
0.106742 
0.117194 
0.128514 
0.140742 
0.153916 
0.168066 
0.183218 
0.199387 
0.216580 
0.234792 
0.254004 
0.274185 
1.00000];

White = [0.005725 
0.000418 
0.000301 
0.000232 
0.000186 
0.000164 
0.000151 
0.000140 
0.000125 
0.000108 
0.000097 
0.000103 
0.000141 
0.000219 
0.000328 
0.000451 
0.000569 
0.000672 
0.000746 
0.000796 
0.000844 
0.000891 
0.000917 
0.000917 
0.000899 
0.000873 
0.000852 
0.000843 
0.000854 
0.000882 
0.000918 
0.000957 
0.001006 
0.001066 
0.001138 
0.001218 
0.001313 
0.001429 
0.001568 
0.001721 
0.001878 
0.002037 
0.002207 
0.002392 
0.002594 
0.002817 
0.003051 
0.003292 
0.003536 
0.003790 
0.004065 
0.004373 
0.004716 
0.005100 
0.005523 
0.005985 
0.006490 
0.007055 
0.007700 
0.008442 
0.009316 
0.010299 
0.011323 
0.012328 
0.013336 
0.014434 
0.015712 
0.017163 
0.018798 
0.020590 
0.022428 
0.024380 
0.026636 
0.029293 
0.032298 
0.035402 
0.038579 
0.042133 
0.046256 
0.050997 
0.056234 
0.061834 
0.067972 
0.074768 
0.082422 
0.090362 
0.098980 
0.108315 
0.118406 
0.129292 
0.141007 
0.153582 
0.167045 
0.181416 
0.196709 
0.212930 
0.230076 
0.248131 
0.267071 
0.286858 
1.00000];

WhiteMales =[0.006366 
0.000460 
0.000330 
0.000263 
0.000201 
0.000182 
0.000169 
0.000158 
0.000140 
0.000117 
0.000100 
0.000109 
0.000161 
0.000271 
0.000425 
0.000596 
0.000760 
0.000910 
0.001029 
0.001118 
0.001206 
0.001289 
0.001333 
0.001331 
0.001295 
0.001242 
0.001197 
0.001170 
0.001177 
0.001210 
0.001254 
0.001301 
0.001357 
0.001423 
0.001503 
0.001594 
0.001703 
0.001842 
0.002011 
0.002200 
0.002395 
0.002595 
0.002811 
0.003053 
0.003320 
0.003613 
0.003920 
0.004234 
0.004551 
0.004877 
0.005231 
0.005623 
0.006047 
0.006502 
0.006993 
0.007521 
0.008103 
0.008764 
0.009534 
0.010433 
0.011494 
0.012686 
0.013942 
0.015190 
0.016449 
0.017808 
0.019378 
0.021160 
0.023171 
0.025378 
0.027621 
0.029981 
0.032724 
0.036002 
0.039756 
0.043696 
0.047709 
0.052083 
0.056999 
0.062555 
0.068831 
0.075649 
0.082899 
0.090493 
0.098662 
0.107809 
0.117683 
0.128319 
0.139751 
0.152006 
0.165111 
0.179085 
0.193939 
0.209680 
0.226304 
0.243796 
0.262135 
0.281284 
0.301198 
0.321817 
1.00000];

WhiteFemales = [0.005052 
0.000374 
0.000270 
0.000199 
0.000171 
0.000146 
0.000131 
0.000120 
0.000109 
0.000099 
0.000092 
0.000097 
0.000119 
0.000164 
0.000226 
0.000298 
0.000366 
0.000418 
0.000445 
0.000452 
0.000456 
0.000464 
0.000469 
0.000472 
0.000474 
0.000477 
0.000483 
0.000494 
0.000511 
0.000535 
0.000563 
0.000597 
0.000640 
0.000693 
0.000759 
0.000830 
0.000910 
0.001005 
0.001114 
0.001232 
0.001352 
0.001473 
0.001597 
0.001727 
0.001867 
0.002021 
0.002185 
0.002356 
0.002530 
0.002715 
0.002915 
0.003144 
0.003413 
0.003730 
0.004093 
0.004494 
0.004930 
0.005410 
0.005945 
0.006549 
0.007263 
0.008069 
0.008897 
0.009697 
0.010497 
0.011379 
0.012423 
0.013616 
0.014964 
0.016450 
0.018000 
0.019675 
0.021611 
0.023874 
0.026423 
0.029035 
0.031746 
0.034881 
0.038644 
0.043048 
0.047852 
0.052956 
0.058712 
0.065354 
0.073047 
0.080703 
0.089080 
0.098228 
0.108197 
0.119037 
0.130795 
0.143513 
0.157230 
0.171979 
0.187784 
0.204660 
0.222609 
0.241622 
0.261675 
0.282729 
1.00000];

Black = [0.014035 
0.000735 
0.000500 
0.000380 
0.000238 
0.000249 
0.000214 
0.000190 
0.000173 
0.000164 
0.000166 
0.000185 
0.000228 
0.000303 
0.000406 
0.000524 
0.000651 
0.000796 
0.000949 
0.001100 
0.001258 
0.001408 
0.001519 
0.001582 
0.001609 
0.001628 
0.001656 
0.001683 
0.001712 
0.001746 
0.001781 
0.001828 
0.001903 
0.002016 
0.002164 
0.002333 
0.002516 
0.002723 
0.002953 
0.003202 
0.003458 
0.003732 
0.004046 
0.004419 
0.004847 
0.005306 
0.005786 
0.006305 
0.006861 
0.007453 
0.008110 
0.008805 
0.009471 
0.010080 
0.010663 
0.011280 
0.012000 
0.012846 
0.013843 
0.014970 
0.016222 
0.017559 
0.018902 
0.020179 
0.021408 
0.022625 
0.023944 
0.025470 
0.027322 
0.029492 
0.031818 
0.034236 
0.036884 
0.039770 
0.042857 
0.046092 
0.049450 
0.052979 
0.056754 
0.060843 
0.065321 
0.070129 
0.075251 
0.080731 
0.086749 
0.092984 
0.099615 
0.106661 
0.114137 
0.122062 
0.130452 
0.139321 
0.148684 
0.158552 
0.168938 
0.179850 
0.191294 
0.203274 
0.215791 
0.228842 
1.00000];

BlackMales = [0.015565 
0.000858 
0.000543 
0.000437 
0.000290 
0.000275 
0.000239 
0.000212 
0.000189 
0.000172 
0.000169 
0.000193 
0.000262 
0.000387 
0.000563 
0.000765 
0.000977 
0.001210 
0.001450 
0.001681 
0.001922 
0.002149 
0.002317 
0.002410 
0.002446 
0.002464 
0.002489 
0.002501 
0.002506 
0.002510 
0.002512 
0.002526 
0.002576 
0.002675 
0.002819 
0.002990 
0.003180 
0.003406 
0.003667 
0.003957 
0.004261 
0.004592 
0.004986 
0.005465 
0.006026 
0.006629 
0.007261 
0.007957 
0.008723 
0.009552 
0.010481 
0.011460 
0.012387 
0.013205 
0.013956 
0.014735 
0.015648 
0.016720 
0.017997 
0.019453 
0.021074 
0.022799 
0.024522 
0.026136 
0.027656 
0.029122 
0.030704 
0.032576 
0.034931 
0.037762 
0.040850 
0.044049 
0.047500 
0.051174 
0.055044 
0.059107 
0.063374 
0.067857 
0.072622 
0.077717 
0.083363 
0.089365 
0.095301 
0.100901 
0.106351 
0.113621 
0.121314 
0.129446 
0.138029 
0.147078 
0.156603 
0.166613 
0.177117 
0.188120 
0.199626 
0.211636 
0.224146 
0.237152 
0.250645 
0.264614 
1.00000];

BlackFemales = [0.012448 
0.000608 
0.000457 
0.000321 
0.000184 
0.000223 
0.000189 
0.000167 
0.000156 
0.000155 
0.000163 
0.000176 
0.000194 
0.000216 
0.000243 
0.000275 
0.000315 
0.000367 
0.000433 
0.000506 
0.000585 
0.000662 
0.000724 
0.000767 
0.000798 
0.000832 
0.000878 
0.000930 
0.000988 
0.001052 
0.001119 
0.001196 
0.001295 
0.001422 
0.001577 
0.001745 
0.001921 
0.002114 
0.002318 
0.002531 
0.002747 
0.002971 
0.003218 
0.003497 
0.003811 
0.004146 
0.004495 
0.004861 
0.005243 
0.005640 
0.006076 
0.006542 
0.007002 
0.007447 
0.007900 
0.008392 
0.008967 
0.009645 
0.010441 
0.011337 
0.012337 
0.013415 
0.014508 
0.015567 
0.016608 
0.017668 
0.018827 
0.020149 
0.021708 
0.023503 
0.025409 
0.027414 
0.029665 
0.032197 
0.034962 
0.037878 
0.040896 
0.044071 
0.047474 
0.051194 
0.055231 
0.059628 
0.064598 
0.070351 
0.077040 
0.083147 
0.089689 
0.096689 
0.104170 
0.112155 
0.120665 
0.129723 
0.139348 
0.149559 
0.160372 
0.171802 
0.183859 
0.196551 
0.209884 
0.223856 
1.00000];

%-----------------------------------%
%-------Data Ends ------------------%
%-----------------------------------%

A = zeros(101,10); %Where we will amalgamate the data
for n = 1:101
    A(n,1)= n; %Fills first column with numbers in ascending order
end
A(:,2) = Total; %For columns 2-10 we put in the different categories
A(:,3) = Males; %This order will come in handy later when we are deciphering what is what
A(:,4) = Females;
A(:,5) = White;
A(:,6) = WhiteMales;
A(:,7) = WhiteFemales;
A(:,8) = Black;
A(:,9) = BlackMales;
A(:,10) = BlackFemales;

for n = 1:9 %This loop will, for each column with data in it, replace the % chance that you survive that particular year
    for i = 1:101 %With the percent chance that you will have survived up until that year
        if i == 1
            A(1,n+1) = 1-A(1,n+1);
        else
            A(i,n+1) = (1-A(i,n+1))*(A(i-1,n+1));
        end
    end
end

%First graph. This one shows % Living Compared to Age
figure
plot(A(:,1),A(:,2),'y')
title('Graph of % Living Compared to Age')
xlabel('Age')
ylabel('% Living')
hold on
plot(A(:,1),A(:,3),'--k')
plot(A(:,1),A(:,4),':k')
plot(A(:,1),A(:,5),'-k')
plot(A(:,1),A(:,6),'g')
plot(A(:,1),A(:,7),'b')
plot(A(:,1),A(:,8),'m')
plot(A(:,1),A(:,9),'c')
plot(A(:,1),A(:,10),'r')

legend('Total','Males','Females','WhiteAll','WhiteMale','WhiteFemale','BlackAll','BlackMale','BlackFemale','Location','northwest')

%-------------------------%
%This is the variable that decides what you will be comparing the other
%races off of. In our case the order correlates with the above
%-------------------------%
TargetRace = 2;

Output = zeros(19,11); %Creates the output matrix that will be populated later

for Age = 1:99
    Target = A(Age,TargetRace);
    Output(Age,1)=Age;
    Output(Age,2)=TargetRace;
    
    for i = 1:9
        breakvar = 0;
        n = 1;
        while breakvar ==0
            if A(n,i+1) > Target
                n = n+1;
            elseif n == 1
                breakvar = 1;
                Overshoot = 9999999;
                Undershoot = 0;
            else
                breakvar = 1;
                Overshoot = A(n,i+1);
                Undershoot = A(n-1,i+1);
            end
        end
        n= n + (1-((Target-Undershoot)/(Overshoot-Undershoot)));
        Output(Age,i+2) = n;
    end
end
Output = Output

figure
plot(Output(:,1),Output(:,3),'y')
title('Relative Ages of Different Races')
xlabel('Age (years)')
ylabel('Age (years)')
hold on
plot(Output(:,1),Output(:,4),'--k')
plot(Output(:,1),Output(:,5),':k')
plot(Output(:,1),Output(:,6),'-k')
plot(Output(:,1),Output(:,7),'g')
plot(Output(:,1),Output(:,8),'b')
plot(Output(:,1),Output(:,9),'m')
plot(Output(:,1),Output(:,10),'c')
plot(Output(:,1),Output(:,11),'r')

legend('Total','Males','Females','WhiteAll','WhiteMale','WhiteFemale','BlackAll','BlackMale','BlackFemale','Location','northwest')